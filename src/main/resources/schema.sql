drop table if exists BOARD_FILE;
drop table if exists BOARD_COMMENT;
drop table if exists BOARD_LIKE;
drop table if exists FILE;
drop table if exists USER_AUTHORITY;
drop table if exists "USER";
drop table if exists AUTHORITY;
drop table if exists BOARD;

CREATE TABLE "USER" (
    USER_ID BIGINT auto_increment primary key,
    USER_NAME varchar(50) unique, PASSWORD varchar(100),
    NICK_NAME varchar(50),
    ACTIVATED TINYINT
);
CREATE TABLE AUTHORITY (
    AUTHORITY_NAME varchar(50) primary key
);
CREATE TABLE USER_AUTHORITY (
    USER_ID BIGINT,
    AUTHORITY_NAME varchar(50),
    FOREIGN KEY (USER_ID) REFERENCES "USER" ON DELETE CASCADE,
    FOREIGN KEY (AUTHORITY_NAME) REFERENCES AUTHORITY ON DELETE CASCADE
);

create table BOARD (
    BOARD_ID BIGINT auto_increment primary key,
    BOARD_TITLE varchar(50),
    BOARD_CONTENT VARCHAR(300),
    VISIBILITY TINYINT,
    CREATED_AT DATETIME,
    CREATED_BY BIGINT,
    MODIFIED_AT DATETIME,
    MODIFIED_BY BIGINT
);

CREATE TABLE BOARD_LIKE(
    LIKE_ID BIGINT PRIMARY KEY AUTO_INCREMENT,
    BOARD_ID BIGINT,
    CREATED_AT DATETIME,
    CREATED_BY BIGINT,
    FOREIGN KEY (BOARD_ID) REFERENCES BOARD (BOARD_ID) ON UPDATE CASCADE ON DELETE CASCADE
);

create Table BOARD_COMMENT (
    COMMENT_ID BIGINT PRIMARY KEY AUTO_INCREMENT,
    COMMENT_CONTENT VARCHAR(100),
    BOARD_ID BIGINT,
    CREATED_AT DATETIME,
    CREATED_BY BIGINT,
    MODIFIED_AT DATE,
    MODIFIED_BY BIGINT,
    FOREIGN KEY (BOARD_ID) REFERENCES BOARD (BOARD_ID) ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE FILE (
    FILE_ID BIGINT PRIMARY KEY AUTO_INCREMENT,
    FILE_NAME VARCHAR(100),
    FILE_ORIGIN_NAME VARCHAR(100),
    FILE_PATH VARCHAR(100),
    CREATED_AT DATETIME,
    CREATED_BY BIGINT,
    MODIFIED_AT DATE,
    MODIFIED_BY BIGINT
);

CREATE TABLE BOARD_FILE (
    BOARD_ID BIGINT,
    FILE_ID BIGINT
);